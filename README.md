# å›¾ä¹¦ç®¡ç†ç³»ç»Ÿ - å¾®æœåŠ¡æ¶æ„

åŸºäºSpring Boot + Dubbo + K8sçš„å›¾ä¹¦ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒç”¨æˆ·æƒé™ç®¡ç†ã€å›¾ä¹¦ç®¡ç†ã€å€Ÿé˜…ç®¡ç†ç­‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Web Client â”‚    â”‚ Mobile App  â”‚    â”‚   Admin     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                  â”‚                  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                   â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                   â”‚   Gateway   â”‚
                   â”‚  (Port 8080)â”‚
                   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Service  â”‚ â”‚ Book Service  â”‚ â”‚Borrow Service â”‚
â”‚ (Port 8081)   â”‚ â”‚ (Port 8082)   â”‚ â”‚ (Port 8083)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                 â”‚                 â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                 â”‚                 â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
â”‚     MySQL     â”‚ â”‚     Redis     â”‚ â”‚     Nacos     â”‚
â”‚ (Port 3306)   â”‚ â”‚ (Port 6379)   â”‚ â”‚ (Port 8848)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ æ ¸å¿ƒåŠŸèƒ½

### ç”¨æˆ·æƒé™ç®¡ç†
- **å­¦ç”Ÿ**: å€Ÿé˜…å›¾ä¹¦ã€å½’è¿˜å›¾ä¹¦ã€æŸ¥çœ‹ä¸ªäººå€Ÿé˜…è®°å½•
- **è€å¸ˆ**: å›¾ä¹¦ä¸Šä¸‹æ¶ã€ç»´æŠ¤å›¾ä¹¦ä¿¡æ¯ã€ç»´æŠ¤å­¦ç”Ÿä¿¡æ¯
- **ç®¡ç†å‘˜**: æ”¯æŒæ‰€æœ‰æ“ä½œï¼ŒåŒ…æ‹¬ç”¨æˆ·ç®¡ç†ã€ç³»ç»Ÿé…ç½®

### å›¾ä¹¦ç®¡ç†
- å›¾ä¹¦CRUDæ“ä½œ
- å›¾ä¹¦åˆ†ç±»ç®¡ç†
- åº“å­˜ç®¡ç†
- å›¾ä¹¦çŠ¶æ€ç®¡ç†

### å€Ÿé˜…ç®¡ç†
- å€Ÿä¹¦åŠŸèƒ½
- è¿˜ä¹¦åŠŸèƒ½
- é€¾æœŸå¤„ç†
- ç½šé‡‘è®¡ç®—

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **åç«¯æ¡†æ¶**: Spring Boot 3.2.0
- **å¾®æœåŠ¡**: Spring Cloud Alibaba + Dubbo 3.2.8
- **æ•°æ®æŒä¹…åŒ–**: MyBatis Plus 3.5.4 + MySQL 8.0
- **ç¼“å­˜**: Redis
- **æ³¨å†Œä¸­å¿ƒ**: Nacos
- **ç½‘å…³**: Spring Cloud Gateway
- **è®¤è¯**: JWT
- **å®¹å™¨åŒ–**: Docker + Kubernetes
- **æ„å»ºå·¥å…·**: Maven

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
cloud-library/
â”œâ”€â”€ library-common/          # å…¬å…±æ¨¡å—
â”‚   â”œâ”€â”€ entity/             # å®ä½“ç±»
â”‚   â”œâ”€â”€ enums/              # æšä¸¾
â”‚   â”œâ”€â”€ dto/                # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”œâ”€â”€ utils/              # å·¥å…·ç±»
â”‚   â””â”€â”€ config/             # é…ç½®ç±»
â”œâ”€â”€ user-service/            # ç”¨æˆ·æœåŠ¡
â”œâ”€â”€ book-service/            # å›¾ä¹¦æœåŠ¡  
â”œâ”€â”€ borrow-service/          # å€Ÿé˜…æœåŠ¡
â”œâ”€â”€ gateway-service/         # ç½‘å…³æœåŠ¡
â”œâ”€â”€ database/                # æ•°æ®åº“è„šæœ¬
â”œâ”€â”€ k8s/                     # Kubernetesé…ç½®
â”‚   â”œâ”€â”€ infrastructure/     # åŸºç¡€è®¾æ–½
â”‚   â””â”€â”€ services/           # å¾®æœåŠ¡
â””â”€â”€ deploy.sh               # éƒ¨ç½²è„šæœ¬
```

## ğŸ”§ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°å¼€å‘ç¯å¢ƒ (æ¨è)

#### ç¯å¢ƒè¦æ±‚
- Java 17+
- Maven 3.8+
- Docker 20.0+
- Docker Compose 2.0+

#### Dockerä¸€é”®éƒ¨ç½²
```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd cloud-library

# ä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡
./start-local.sh
```

#### IDEå¼€å‘æ¨¡å¼
```bash
# åªå¯åŠ¨åŸºç¡€è®¾æ–½
./dev-local.sh

# ç„¶ååœ¨IDEä¸­å¯åŠ¨å„ä¸ªæœåŠ¡(Profile: local)
```

è¯¦ç»†æœ¬åœ°å¼€å‘æŒ‡å—è¯·å‚è€ƒï¼š[README-LOCAL.md](README-LOCAL.md)

### Kubernetesç”Ÿäº§ç¯å¢ƒ

#### ç¯å¢ƒè¦æ±‚
- Java 17+
- Maven 3.8+
- Docker
- Kubernetes 1.20+
- kubectl

#### éƒ¨ç½²æ­¥éª¤
```bash
# ç¼–è¯‘é¡¹ç›®
mvn clean compile -DskipTests

# éƒ¨ç½²åˆ°K8s
./deploy.sh

# éªŒè¯éƒ¨ç½²
kubectl get pods -n library-system
kubectl get services -n library-system
```

## ğŸŒ APIæ¥å£

### ç½‘å…³åœ°å€
- **HTTPè®¿é—®**: `http://<gateway-service-ip>:8080`

### ä¸»è¦æ¥å£

#### ç”¨æˆ·ç®¡ç†
- `POST /api/user/login` - ç”¨æˆ·ç™»å½•
- `POST /api/user/register` - ç”¨æˆ·æ³¨å†Œ  
- `GET /api/user/info/{userId}` - è·å–ç”¨æˆ·ä¿¡æ¯
- `GET /api/user/list` - è·å–ç”¨æˆ·åˆ—è¡¨

#### å›¾ä¹¦ç®¡ç†
- `POST /api/book` - æ·»åŠ å›¾ä¹¦
- `PUT /api/book/{bookId}` - æ›´æ–°å›¾ä¹¦
- `DELETE /api/book/{bookId}` - åˆ é™¤å›¾ä¹¦
- `GET /api/book/{bookId}` - è·å–å›¾ä¹¦è¯¦æƒ…
- `GET /api/book/list` - è·å–å›¾ä¹¦åˆ—è¡¨
- `GET /api/book/available` - è·å–å¯å€Ÿå›¾ä¹¦

#### å€Ÿé˜…ç®¡ç†
- `POST /api/borrow` - å€Ÿé˜…å›¾ä¹¦
- `PUT /api/borrow/{recordId}/return` - å½’è¿˜å›¾ä¹¦
- `GET /api/borrow/records` - è·å–å€Ÿé˜…è®°å½•

## ğŸ” é»˜è®¤è´¦å·

- **ç®¡ç†å‘˜è´¦å·**: `admin`
- **ç®¡ç†å‘˜å¯†ç **: `admin123`

## ğŸ” ç›‘æ§å’Œæ—¥å¿—

- **å¥åº·æ£€æŸ¥**: `GET /actuator/health`
- **æœåŠ¡ä¿¡æ¯**: `GET /actuator/info`
- **æ—¥å¿—çº§åˆ«**: DEBUG (å¼€å‘ç¯å¢ƒ)

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚